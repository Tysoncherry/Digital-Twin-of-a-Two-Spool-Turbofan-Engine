% ===== build_CFM56_HPC_map.m =====
% Constructs 2-D lookup table data for the HPC (CFM56-7B) taken from Figure 3.2 of Martins (2014).
% Rows: nondimensional speed % of N2_design (0.4, 0.6, 0.8, 1.0, 1.1)
% Cols: corrected flow [kg/s] (20, 30, 40, 50, 60)
% Table values: Pressure Ratio and Efficiency

% 1) Breakpoints
speed_frac_hpc = [0.4, 0.6, 0.8, 1.0, 1.10];   % nondimensional
Wc_hpc_bp      = [20, 30, 40, 50, 60];         % kg/s

% 2) PR map (5x5)
PR_hpc_map = [ ...
    1.2  1.4  1.6  1.8  2.0;  ...
    2.8  3.4  4.0  4.5  5.0;  ...
    5.5  6.0  6.4  6.8  7.2;  ...
    8.0  8.5  9.0  9.5 10.0;  ...
    9.0  9.5 10.0 10.5 11.0   ...
];

% 3) Efficiency map (5x5)
eta_hpc_map = [ ...
    0.70 0.75 0.78 0.80 0.78; ...
    0.78 0.82 0.85 0.87 0.86; ...
    0.80 0.84 0.88 0.90 0.89; ...
    0.82 0.87 0.90 0.92 0.91; ...
    0.80 0.85 0.88 0.90 0.89  ...
];

% 4) Convert nondimensional speed_frac_hpc to actual N2 (rpm)
load('D:\Thesis\Turbofan_DigitalTwin_Thesis\Data/CFM56_DesignPoint.mat','N2_design');
speed_vec_hpc = speed_frac_hpc * N2_design;  

% 5) Save to .mat
save('D:\Thesis\Turbofan_DigitalTwin_Thesis\Data/CFM56_HPC_map.mat', ...
    'speed_vec_hpc','Wc_hpc_bp','PR_hpc_map','eta_hpc_map');
